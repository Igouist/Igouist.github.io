<!doctype html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92586970-4"></script>
    <script async>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-92586970-4');
    </script>

    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "lpnoqxbhhj");
    </script>

    <meta name="generator" content="Hugo 0.117.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>Reposts | 伊果的沒人看筆記本</title>
    <meta property="og:title" content="Reposts - 伊果的沒人看筆記本">
    <meta property="og:type" content="article">
        
        
        
    <meta name="description" content="Reposts">
        
    <meta name="author" content="Igouist">
    <meta property="og:url" content="https://igouist.github.io/repost/">
    <link defer rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link defer rel="stylesheet" href="/css/normalize.css">
    
    <link defer rel="stylesheet" href="/css/style.css">
    <link defer rel="alternate" type="application/rss+xml+xml" href="https://igouist.github.io/repost/index.xml" title="伊果的沒人看筆記本" />
    <script async type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    
    <script data-ad-client="ca-pub-2119949858103459" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script async>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "[map[]]",
        enable_page_level_ads: true
    });
    </script>
    


    
    
</head>


<body>
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://igouist.github.io/">
                        伊果的沒人看筆記本
                    </a>
                
                <p class="description">菜雞寫筆記，踩坑全紀錄</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://igouist.github.io/">Home</a>
                    
                    <a  href="https://igouist.github.io/categories/csharp-and-dotnet/" title="CSharp">CSharp</a>
                    
                    <a  href="https://igouist.github.io/categories/python/" title="Python">Python</a>
                    
                    <a  href="https://igouist.github.io/categories/reading/" title="Reading">Reading</a>
                    
                    <a class="current" href="https://igouist.github.io/repost/" title="Repost">Repost</a>
                    
                    <a  href="https://igouist.github.io/archives/" title="Archives">Archives</a>
                    
                    <a  href="https://igouist.github.io/about/" title="About">About</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>


<div id="body">
    <div class="container">
        <div class="col-group">
            <div class="col-8" id="main">
                <div class="res-cons">
                    <div style="border:2px rgb(70, 70, 70) dashed; padding: 5px 10px;">
                        Hi! 這裡是我轉貼喜歡文章的地方，你也可以到<a style="color: rgb(125, 200, 255);border-bottom: 1px solid rgb(98, 98, 98);" href="https://igouist.github.io/repost/archives/">推薦文章列表</a>查看所有的推薦文章呦！
                    </div>
                    <hr style="border: 1px solid #21252b;"/>
                    
                    
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0309-a-brief-history-of-airbnb-architecture/" title="【每天推薦一篇文章】Airbnb 的架構演進" >【每天推薦一篇文章】Airbnb 的架構演進</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-9,
                            </date>
                            
                            <div class="post-content">
                                <p>剛剛看到這篇香的，立馬拿來當作今日轉貼：<br/>
<a href="https://medium.com/@mananshah3654/a-brief-history-of-airbnbs-architecture-bce6d0405f9c">A Brief History of Airbnb’s Architecture</a></p>
<p>文章裡介紹了 Airbnb 的架構從一個單體長成 SOA 的過程，包括他們在大單體時遇到的問題、逐步遷移的比對機制、SOA 的優缺點，以及他們搞的 API 框架等等。</p>
<p>這邊就節選一些我覺得有趣的地方，對其他部份有興趣的朋友可以直接閱讀文章。</p>
<hr>
<p>因為搬家不是一兩天就搬得完的，所以 Airbnb 在過程中有對新舊系統的操作進行比對</p>
<p>例如<strong>讀取相關的操作，就同時呼叫新舊系統並且比對查詢結果，確定都沒問題之後才遷移過去</strong></p>
<p>而<strong>寫入相關的操作，則是建立第二顆 DB，然後再查詢出來比對兩邊的內容</strong></p>
<p>之所以對這段有興趣，是因為之前也遇過把舊系統的功能遷移到新系統的場景，喊了一聲「絞殺者模式！」就開始搬磚頭</p>
<p>當時也是藉由同時查詢兩邊來比對，現在看到人家也這麼幹，稍微安心了一點(?)</p>
<hr>
<p>這篇文章裏面也整理了服務導向架構（Service-Oriented Architecture, SOA）的優缺點，也節錄上來讓大家參考（同時方便我之後查詢）</p>
<blockquote>
<p>Some pros were as follows:<br/>
一些優點如下：</p>
<p>The system became more reliable and highly available. Even if one service went down, other parts of the service-oriented architecture could still function.
<strong>系統變得更加可靠且高度可用</strong>。即使其中一個服務出現故障，服務導向架構的其他部分仍然可以運作。</p>
<p>Services were now individually scalable, allowing fine-tuning of the resource allocation depending on the real needs of the system.
現在<strong>服務可以進行個別的可擴展性調整</strong>，根據系統的實際需求進行資源分配的微調。</p>
<p>Increased business agility due to separating different parts of the product into different services. Each team could iterate in parallel.
將產品的不同部分分開成不同的服務，能夠增加業務的靈活性。<strong>每個團隊都可以並行進行迭代</strong>。</p>
</blockquote>
<blockquote>
<p>However, there were some cons as well:<br/>
然而，也有一些缺點：</p>
<p>Engineers can take more time to ship a feature in service-oriented architecture because they need to first acquaint themselves with the various services. Also, any change potentially involves multiple services
工程師在服務導向架構中可能需要更多時間來發布一個功能，因為他們<strong>需要先熟悉各種服務</strong>。此外，<strong>任何變更都可能涉及多個服務</strong>。</p>
<p>Even though services were loosely coupled, certain patterns of logic had to be repeated across different services.
即使服務之間鬆散耦合，<strong>某些邏輯模式仍需要在不同服務之間重複</strong>。</p>
<p>Complicated dependency graph especially when there is a lack of API governance. This could also result in circular dependencies and also make it difficult for engineers to debug errors.
當 API 管理不足時，<strong>複雜的依賴關係圖可能會出現。這可能導致循環依賴</strong>，並使工程師難以調試錯誤。</p>
</blockquote>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0309-a-brief-history-of-airbnb-architecture/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0308-reverse-interview/" title="【每天推薦一篇文章】反問面試官的時候到了" >【每天推薦一篇文章】反問面試官的時候到了</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-8,
                            </date>
                            
                            <div class="post-content">
                                <p>剛剛看到前輩貼了一篇實用列表，立馬轉貼上來：<br/>
<a href="https://github.com/bater/reverse-interview-zh_tw">反向面試 - 技術面試最後反問面試官的題庫</a></p>
<blockquote>
<p>如何使用本份文件</p>
<ul>
<li>檢查一下哪些問題你感興趣</li>
<li>檢查一下哪些是你可以自己在網上找到答案的</li>
<li>找不到的話就向面試官提問</li>
</ul>
<p>絕對不要想把這個列表裡的每個問題都問一遍。 （請尊重面試官的時間，而且你可以通過搜尋已經公開的答案來顯示你的主動性）</p>
<p>請記住事情總是靈活的，組織的結構調整也會經常發生。擁有一個 bug 追踪系統並不會保證高效處理 bug。 CI/CD （持續集成系統） 也不一定保證交付時間會很短。</p>
</blockquote>
<p>有需要的朋友再自行取用，祝好運！</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0308-reverse-interview/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0307-sociable-unit-test/" title="【每天推薦一篇文章】社交型單元測試" >【每天推薦一篇文章】社交型單元測試</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-7,
                            </date>
                            
                            <div class="post-content">
                                <p>今天還要聚餐，決定簡單轉貼一下之前讓我很衝擊的東東：社交型單元測試<br/>
<a href="https://wadehuanglearning.blogspot.com/2020/01/blog-post.html">探討單元測試和整合測試的涵蓋範圍 - WadeHuang的學習迷航記</a></p>
<ul>
<li>孤立型的單元測試：受測物件不會使用真實的依賴類別</li>
<li>社交型的單元測試：受測物件會使用真實的依賴類別</li>
</ul>
<p>我一直以為出手就是要瘋狂 MOOOOOOOCCCKKKKK，著實有點嚇到= =</p>
<p>但當我看到這段：</p>
<blockquote>
<p>在《修改軟件的藝術》第 10 章測試先行，作者提及 TDD 的單元測試與狹義的單元測試不同，<strong>TDD 是以一個行為作為一個單元</strong>：<br/></p>
<blockquote>
<p>一個獨立、可驗證的行為。這個行為會對系統產生可觀察的影響，且不和系統的其他行為耦合。</p>
</blockquote>
<p>這個單元測試的定義意味著：每個可觀察到的行為都應該要有一個相對應的測試。<br/>
另外在《Growing Object-Oriented Software, Guided by Tests》第五章節也指出，應該針對行為進行單元測試，而非針對方法。</p>
<p>這下真相大白了！如果你是 BDD 或 TDD 的實踐者，那麼你的單元測試就可能是跨多個類別的社交型單元測試，<strong>因為測試的對象是 一個行為，而非一個類別</strong>。</p>
</blockquote>
<p>覺得也挺有道理 🤔</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0307-sociable-unit-test/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0306-develop-review/" title="【每天推薦一篇文章】軟體開發的復盤" >【每天推薦一篇文章】軟體開發的復盤</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-6,
                            </date>
                            
                            <div class="post-content">
                                <p>今天打開收件閘，發現魯迪老師有貼了新文章，立馬轉貼上來給大家：<br/>
<a href="https://ruddyblog.wordpress.com/2024/03/05/%E8%BB%9F%E9%AB%94%E9%96%8B%E7%99%BC%E7%9A%84%E5%BE%A9%E7%9B%A4/">軟體開發的復盤 - RUDDYLLEE</a></p>
<p>在這篇文章裡，魯迪老師先提了復盤的意義：<strong>「重來一次可以學得最多」</strong></p>
<p>接著馬上就進入第一個復盤的情境：Code Review</p>
<blockquote>
<p><strong>程式碼審核 (Code review) 是程式復盤的基石</strong></p>
</blockquote>
<blockquote>
<p>程式碼在開發作業中的 code review 行為是團隊復盤的第一個情境，程式撰寫人應該負起說明程式碼情境的責任 (對程碼做標題說明 WHY? 解決了甚麼需求的問題)</p>
<p>審核人員則應該針對解決問題的方法給予回饋，以提出”如果 …會怎樣”就是what if 的提問方式來做回答，目的在造成當事人的反思，這樣做或許可以促成當事人想到更好的解題方案，或是避免掉將來可能產生的缺陷中。</p>
<p>在必要時進行面對面的溝通，對學習更有幫助，形成教學相長。</p>
</blockquote>
<p>Code Review 讓團隊可以協作，並且分享彼此的知識，讓團隊學到更多。</p>
<hr>
<p>第二個情境則是復盤需求：</p>
<blockquote>
<p>復盤的第二個情境是<strong>針對需求的復盤</strong>。</p>
</blockquote>
<blockquote>
<p>由於需求的來源是針對使用者的操作情境而來，它的排序方式是以協助使用者順利完成任務為出發點。而程式設計人員則是以整個專案開發的技術範疇為主，它思考的是盲點與疑惑&hellip;（中略）</p>
<p>無論是疑惑或是盲點，都是程式設計人員依據需求的陳述和自己所擁有的經驗、技能進行評估後所產生的概念，中間難免會做了許多的假設，這一點；就好比對弈時猜測對方為什麼會下這步棋時的動機一般，需要事後印證來學得正確的經驗。</p>
<p>復盤可以讓我們學到最多。當然針對核心部分的 MVP 開發作業的驗證，也是很值得復盤以充分學習了解的地方。</p>
</blockquote>
<p>這段看起來有點像是需求完成後，回頭找出認知落差再校準，藉此累積經驗的感覺</p>
<p>例如我們可能誤以為這個功能應該就是長得像Ａ，結果來來回回老半天才發現客戶是要Ｂ，下次我們就知道還有Ｂ這個可能性</p>
<hr>
<p>這篇有個我覺得蠻重要的概念：<strong>檢討的目的是不再犯相同的錯，而復盤的目的是找出更適合的解決方法、從錯誤中學習。兩者並不相同</strong></p>
<p>檢討跟復盤之間很常會發生誤解，有時候我們會在寶貴的學習機會前忙著找戰犯，這樣就浪費了（特別把這個概念寫出來，也算是提醒我自己吧）</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0306-develop-review/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0305-consistent-hashing/" title="【每天推薦一篇文章】Consistent Hashing" >【每天推薦一篇文章】Consistent Hashing</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-5,
                            </date>
                            
                            <div class="post-content">
                                <p>昨天有朋朋提到 Consistent Hashing，發現我筆記庫沒有相關資料，果斷重新了解一下並轉貼上來：<a href="https://medium.com/@chyeh/consistent-hashing-algorithm-%E6%87%89%E7%94%A8%E6%83%85%E5%A2%83-%E5%8E%9F%E7%90%86%E8%88%87%E5%AF%A6%E4%BD%9C%E7%AF%84%E4%BE%8B-41fd16ad334a">Consistent Hashing Algorithm: 應用情境、原理與實作範例 - chyeh</a></p>
<p><strong>Consistent Hashing 主要是應用於分散式系統的場景，用來判斷要把資料送給哪個服務節點時用的</strong></p>
<p>如果同一份資料會隨機亂噴，兩次噴都噴到不一樣的服務，要追查問題或是搞什麼監控警報就會變得比較麻煩(?)。因此我們會希望同一份資料進來，就固定會到某一個服務。除了容易重現問題以外，在這個服務上搞快取也比較方便好命中</p>
<p>但如果只是使用簡單的 Hash 來對應（例如說平均分配，第一筆資料丟給第一台服務、第二筆資料丟給第二台服務……），<strong>就有可能遇到當節點新增或減少時，資料對應到的服務大量變動的問題</strong></p>
<p>這一段我有點不太會說明（有更熟的朋朋歡迎幫忙），這邊就跟 GPT 一起 Pair 來舉個例子：</p>
<blockquote>
<p>想像一下，你有一堆信件需要放到幾個郵箱裡。你決定用一個簡單的方法：每個郵箱輪流放信。</p>
<p>例如說你有 10 封信、3 個郵箱。那麼第 1 封信（編號為 1）就放到編號 1 的郵箱，第 2 封信放到編號 2 的郵箱，以此類推。編號 10 的信會放到編號 1 的郵箱，因為 10 除以 3 餘 1。</p>
<p>但是，如果你突然多了一個郵箱，變成 4 個郵箱，這個簡單的分配方法就需要改變了，因為你現在是按照 4 來計算每封信應該放哪了。</p>
<p>第 4 封信原本在第 1 個郵箱，現在得放到第 4 個郵箱了，這樣我們就得把很多信都拿出來，重新分一遍，非常麻煩，特別是信件很多的時候。</p>
</blockquote>
<p>這時候我們就可以使用 Consistent Hashing，就如上面轉貼的文章所說：</p>
<blockquote>
<p><strong>Consistent Hashing 的做法是找「沿著順時鐘方向走，遇到的第一個 Index」</strong></p>
</blockquote>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aHCNfSbtkVltA_Yw.png" alt="">
圖片來源：今天轉貼的這篇文章</p>
<p>同樣地，我們請 GPT 同樣用郵箱的例子支援一下：</p>
<blockquote>
<p>想像一下，你有一堆信件需要放到幾個郵箱裡。而你站在一個圓形的大廳，大廳有些方向的牆壁上掛著郵箱</p>
<p>你決定像時鐘一樣把大廳分為 1 ~ 12，然後你會根據郵件的編號找到對應的數字，再沿著房間的圓形牆壁走，走到下一個郵箱就把信件投遞進去。</p>
<p>比如說，編號是 10 的信，就先找到圓圈上對應 10 的位置，開始順著圓走，直到碰到的第一個郵箱（可能這個郵箱位在 12），然後就把信放進去。</p>
<p>這樣即使多了一個郵箱，大多數郵箱的信也不用再重新分配了</p>
</blockquote>
<p>因為計算 Hash 之後是去找到下一個圓圈上的節點，當節點新增的時候，只有新增節點的前一段受到影響；移除的時候也只有到下一個節點之間會影響</p>
<p>這樣就比較不會有資料和服務的對應關係大幅變動的問題了，我們又成功地拯救了我們各個服務的快取(?)，可喜可賀</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0305-consistent-hashing/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0304-event-storming-is-good/" title="【每天推薦一篇文章】Event storming 是個好東西" >【每天推薦一篇文章】Event storming 是個好東西</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-4,
                            </date>
                            
                            <div class="post-content">
                                <p>上一週參加的 Meetup 講師有把內容寫成部落格文章了，有興趣的可以看看他們故事 @@</p>
<p><a href="https://chengweichen.com/2024/02/ddd-taiwan-community-event-storming.html">Event storming 是個好東西：幫助團隊看見全貌，引發團隊變革新契機 - 艦長，你有事嗎？</a></p>
<blockquote>
<p>當你想要導入 CI/CD、DevOps 或 OOXXOps 時，<strong>你會如何幫助所有的夥伴建立相同的共識？讓大家可以看見相同的全貌及痛點？</strong></p>
<p>當團隊開始重視 DevOps 核心精神中的「交付價值、持續改善」時，我們確實需要一些不同於傳統會議與組織溝通的方法，來輔助不同的部門及團隊打破 silos 共同看見整體流程的完整面貌，畢竟我們都知道 DevOps 從來都不是一條龍工程師自己的事情。</p>
<p>在本次的 Meetup，我將會聊一聊幾個來自真實場景的小故事，分享這段由 Event Storming 所觸發的團隊變革旅程。</p>
</blockquote>
<p>題外話，講者提到他帶著同事用便條紙，把到職到離職之間遇到的事、做的專案、學到的東西等等都整理出來</p>
<p>想到可以在牆上弄個時間軸、把便條紙貼一貼，就能直接看見自己負責的專案和學到的技能，感覺也挺不錯的</p>
<p>唯一的問題只有：好像沒多少東西能貼🥲</p>
<p>延伸閱讀：<a href="/repost/2024/02/0209-event-storming">2/29 - 認識 Event Storming</a></p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0304-event-storming-is-good/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0303-numbers-everyone-should-know/" title="【每天推薦一篇文章】設計系統時應該知道的一些數字" >【每天推薦一篇文章】設計系統時應該知道的一些數字</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-3,
                            </date>
                            
                            <div class="post-content">
                                <p><a href="https://everythingisdata.wordpress.com/2009/10/17/numbers-everyone-should-know/">Numbers Everyone Should Know - Everything is Data</a></p>
<p>這篇文章引用了 Jeff Dean 在 LADIS 2009 演講時提到的一些「每個人都應該知道的數字」，例如命中快取、傳輸資料等等，作為設計系統時的一種參考資料：</p>
<p><img src="https://i.imgur.com/ODKg50m.png" alt="Image"></p>
<p>我更在意的是作者提到設計系統時會有用的兩個技能：</p>
<ul>
<li><strong>能夠針對不同設計方案的效能培養出直覺，才能拒絕不合理的設計</strong></li>
<li><strong>能夠動手測試，比較不同方案的效能，才能累積經驗、磨練直覺</strong></li>
</ul>
<p>有種藉由練習來磨練判斷力的感覺 🤔</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0303-numbers-everyone-should-know/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0302-deterministic-aperture/" title="【每天推薦一篇文章】Deterministic Aperture" >【每天推薦一篇文章】Deterministic Aperture</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-2,
                            </date>
                            
                            <div class="post-content">
                                <p>今天<a href="https://github.com/checkcheckzz/system-design-interview?tab=readme-ov-file#-company-engineering-blogs">挖到礦了</a> ，決定先挑一篇出來看。</p>
<p>今天要轉貼的是 X (Twitter) Enginering 在 2019 的這篇：<br/>
<a href="https://blog.x.com/engineering/en_us/topics/infrastructure/2019/daperture-load-balancer">Deterministic Aperture: A distributed, load balancing algorithm</a></p>
<p><strong>文章裡介紹了 Twitter 朋朋搞負載平衡的歷程</strong>，這邊也簡單筆記一下。有興趣的朋友可以直接進入文章閱讀，畢竟有圖還是比較好理解。</p>
<hr>
<p>在介紹的過程中，先讓我們假設是「 Client &ndash; 呼叫 &ndash;&gt; Backend 」這樣的關係</p>
<p>一開始他們是簡單粗暴地讓 Client 各自插負載平衡的東西，然後噴到 Backend 的服務上。但在服務擴展到幾千個實例之後，就開始出現了一些問題，例如分配 socket 啦 buffer 等等。</p>
<p>接著他們嘗試搞點隨機，雖然看起來好像不錯，但實際上變得更不平衡，一部署上去就讓服務們咚咚嚨咚鏘：</p>
<blockquote>
<p>Before the deployment we see a nice collection of traces neatly stacked atop one another.
<strong>After the deployment: pandemonium!</strong></p>
</blockquote>
<p>接著他們重新想了一下他們需要的東西：輕量、而且盡量不要被 Client 和 Backend 的數量變動干擾。</p>
<p>於是他們嘗試了<strong>環狀座標系統（Ring coordinates）</strong></p>
<p><img src="https://cdn.cms-twdigitalassets.com/content/dam/blog-twitter/engineering/en_us/infrastructure/2019/dapeture-load-balancer/coord-transform.png.img.fullhd.medium.png" alt="">
圖片來源：今天轉貼的這篇</p>
<p>從圖片上來看，每個 Client 和 Backend 都是圓圈上的一個點，假設有 3 個 Client，他們就會被各自畫在圓圈上 1/3 的位置；同時如果有 6 個 Backend，這些 Backend 的實例也會被各自畫在圓圈上 1/6 的位置，然後 Client 在圓圈上找到最近的 Backend 就打下去。</p>
<p>這次嘗試雖然已經比前面的隨機好很多，但仍然發現分配不均的狀況</p>
<p>最後他們延伸出了<strong>連續環狀座標</strong></p>
<p><img src="https://cdn.cms-twdigitalassets.com/content/dam/blog-twitter/engineering/en_us/infrastructure/2019/dapeture-load-balancer/p2c-fractional-continued.png.img.fullhd.medium.png" alt="Image">
圖片來源：同樣是今天轉貼的這篇</p>
<p>連續環狀座標不是畫在圓圈的點上，而是圓圈的一段。假設有 3 個 Client，他們就會各占 1/3 圈</p>
<p>如此一來 Client 和 Backend 就會形成兩個圈。而外圈的 Client 就會按照比例對應到內圈的 Backend，達到非常舒服的平衡(?)</p>
<p>最後這篇文章列了一些實測的數據和使用上的限制（例如有突發性的高流量可能還是會讓壓力集中在某些 Backend 上）</p>
<blockquote>
<p>The flexibility and performance of deterministic aperture has been successful and general enough to cement its place as the default load balancer algorithm at Twitter. Most services have been migrated to the new load balancer with only a handful of exceptions. With that comes a few small operational changes and limitations to consider.</p>
</blockquote>
<blockquote>
<p>Deterministic aperture 的靈活性和性能已經取得成功，並且足夠普遍，以至於在 Twitter 上鞏固了它作為默認的負載平衡器算法的地位。大多數服務已經遷移到新的負載平衡器，只有少數例外。隨之而來的是一些小的操作變化和限制需要考慮。</p>
</blockquote>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0302-deterministic-aperture/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/03/0301-guid-and-logical-fragmentation/" title="【每天推薦一篇文章】GUID 與索引破碎" >【每天推薦一篇文章】GUID 與索引破碎</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-1,
                            </date>
                            
                            <div class="post-content">
                                <p>今天看到黑大前幾天發了索引破碎的文，順手轉貼上來；</p>
<p><a href="https://blog.darkthread.net/blog/guid-clust-idx-frag-n-space/">GUID 叢集索引測試 2：索引碎片化分析與資料表虛胖問題</a><br/>
延伸閱讀：<a href="https://blog.darkthread.net/blog/guid-as-pk-on-db/">GUID Primary Key資料庫避雷守則</a></p>
<blockquote>
<p>PK使用頻率很高，設成叢集索引對效能最有利，故慣例上會設成叢集索引以提升效能。</p>
</blockquote>
<blockquote>
<p>然而，<strong>因為GUID具有不連續的隨機性</strong>，即使循序寫入資料，常常後寫的資料GUID排序較前，依叢集索引特性，實體儲存位置應擺在前段，造成<strong>每次寫入資料都需挪動調整既有資料造成索引破碎，拖累寫入與查詢效能</strong>。</p>
</blockquote>
<p>備註：我現在都無腦用 <code>NEWSEQUENTIALID</code> 了，好香好香</p>
<hr>
<blockquote>
<p><strong><code>avg_fragmentation_in_percent</code> 可視為碎片化的程度</strong>。Logical fragmentation 官方翻譯為邏輯片段，我覺得譯成「邏輯碎片」更體切，指的是索引資料分頁邏輯順序與實體順序不一致，邏輯上依索引順序應該連續的資料分頁，被放在不連續的實體位置，如此存取將需要更多 IO 動作，拖慢效能。此<strong>值介於 10 到 15 之間時建議做索引重組，大於 15 時應考慮進行索引重建</strong>。</p>
</blockquote>
<blockquote>
<p><strong><code>avg_page_space_used_in_percent</code> 則是資料分頁存放資料的比率</strong>，比例過低將造成空間浪費(本案例的狀況)，代表要走訪更多分頁才能蒐集完所需要資料，勢必影響效能。<strong>這個值介於 60 到 75 之間時建議做索引重組，低於 60 時應考慮索引重建</strong>。</p>
</blockquote>
<p>敝司也有一張每天會有排程拋一卡車資料進去的表，也是使用 GUID 當 PK。DBA 才剛重建完沒兩天，<code>avg_fragmentation_in_percent</code> 就衝破 70</p>
<p>但因為年久失修綁定古蹟，也不怎麼查詢，現在就當成負面教材來宣導(?)，也算是加深印象了</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/03/0301-guid-and-logical-fragmentation/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    
                        <article class="post">
                            <header>
                                <h1 class="post-title">
                                    <a href="https://igouist.github.io/repost/2024/02/0229-event-storming/" title="【每天推薦一篇文章】認識 Event Storming" >【每天推薦一篇文章】認識 Event Storming</a>
                                </h1>
                            </header>
                            <date class="post-meta meta-date">
                                2024-3-1,
                            </date>
                            
                            <div class="post-content">
                                <p>今天跟朋友去聽了場 Event Storming 的分享，回家趕快查點資料補一下。如此如此這般這般，今天要轉貼的是這篇：</p>
<p><a href="https://ithelp.ithome.com.tw/articles/10219177">Event Storming Part 1 - 簡介與事前準備 - Think in Domain-Driven Design</a></p>
<p>既然這篇文章有 Part 1 的字眼，當然就還有後面幾篇。這邊也一併附上來（我之後要回來查資料也比較好查）：</p>
<ul>
<li><a href="https://ithelp.ithome.com.tw/articles/10220073">Event Storming Part 2 - 風暴展開</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10220315">Event Storming Part 3 - 軟體設計</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10221295">Event Storming Part 4 - 可以做的更好</a></li>
</ul>
<p>看起來 <strong>Event Storming 是個揪團一起貼便利貼的歡樂活動，還能幫助團隊從彼此的視角找出盲點、建立共識</strong>等等</p>
<p>大家先自由地把事件（Event）貼出來，讓我感到比較新奇的是在於事件要用過去式來寫，身為一個平常用詞很模糊(?)的人，覺得這看法蠻有道理：</p>
<blockquote>
<p>根據 Alberto Brandolini 本人的敘述，使用過去式代表著系統的狀態。如果你今天使用的是「註冊」這類詞時，你代表的是一個流程。相對的，用「註冊已開始」、「註冊已完成」會有更好的清晰度且顆粒度，避免過度設計。</p>
</blockquote>
<p>然後大家嘗試從一條路徑（通常從 Happy path 開始）把事件串成一組故事，過程中也會請領域專家重新整理順序，在這過程中對焦彼此的理解：</p>
<blockquote>
<p>這個過程中，<strong>大家可以發現不管是團隊間還是個人間對於同一份商業流程的理解有多麼的不同</strong>。</p>
<p>而在領域專家整理時，也可以讓大家知道哪些 Event 重要哪些不是我們需要關注的，加深大家對於系統責任邊界的了解。</p>
</blockquote>
<p>第三輪的時候讓大家按讚跟標出問題，針對問題進行討論；第四輪再加上 Command（使用者或軟體所做出的決定，例如 買早餐 Command -&gt; 已經買早餐 Event）、發出 Command 的角色、外部系統…等等。這整段讓我有種把故事越補越完整的感覺，也許還會讓團隊產生一種協作的成就感？</p>
<p>最後兩篇則提了從 Event Storming 到軟體建模，以及列了一些可能會翻車的問題（例如變成個人秀、突然噴一堆技術細節等等）。</p>
<p>但因為我沒跑過，只能先看過記錄下來:( ，比較不像前兩篇有 wow! 的感覺。</p>
<p>如果有跑過的朋朋能分享，或是丟更多資訊上來，我會跟你說聲甘溫</p>……
                            </div>
                            <p class="readmore"><a href="https://igouist.github.io/repost/2024/02/0229-event-storming/">閱讀全文</a></p>
                        </article>
                        <br />
                        <hr color="#D9D9D9"/>
                    

                    


<ol class="page-navigator">
    
    <li class="prev">
        <a href="https://igouist.github.io/repost/page/2/">上一頁</a>
    </li>
    

    
    <li >
        <a href="https://igouist.github.io/repost/">1</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/2/">2</a>
    </li>
    
    <li  class="current">
        <a href="https://igouist.github.io/repost/page/3/">3</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/4/">4</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/5/">5</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/6/">6</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/7/">7</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/8/">8</a>
    </li>
    
    <li >
        <a href="https://igouist.github.io/repost/page/9/">9</a>
    </li>
    

    
    <li class="next">
        <a href="https://igouist.github.io/repost/page/4/">下一頁</a>
    </li>
    
</ol>



                </div>
            </div>

            <div id="secondary">
    <section class="widget">
        <form id="search" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://igouist.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    
    
    <section class="widget">
        <h3 class="widget-title">系列文</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://igouist.github.io/series/%E6%88%91%E8%A6%81%E8%A8%82%E4%BE%BF%E7%95%B6/">我要訂便當 (5)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/series/%E8%8F%9C%E9%9B%9E%E6%96%B0%E8%A8%93%E8%A8%98/">菜雞新訓記 (8)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/series/%E8%8F%9C%E9%9B%9E%E8%88%87%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91/">菜雞與物件導向 (17)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://igouist.github.io/post/2024/01/lottery-is-goodness/" title="我買彩券是為了做一個善良的人">我買彩券是為了做一個善良的人</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2023/04/wolong/" title="臥龍：蒼天殞落　白金！">臥龍：蒼天殞落　白金！</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2023/01/banner-2-midjourney-and-canva/" title="使用 Midjourney AI 繪圖 &amp; Canva 產生 Banner 初體驗">使用 Midjourney AI 繪圖 &amp; Canva 產生 Banner 初體驗</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2023/01/banner-1-system-drawing/" title="使用 .Net 的 System.Drawing 產生簡單的文字 Banner 初體驗">使用 .Net 的 System.Drawing 產生簡單的文字 Banner 初體驗</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2023/01/polyglot-notebooks/" title="Polyglot Notebooks －－ 在 VSCode 簡單迅速地撰寫 C# 腳本吧">Polyglot Notebooks －－ 在 VSCode 簡單迅速地撰寫 C# 腳本吧</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2023/01/nioh/" title="仁王＆仁王２　白金！">仁王＆仁王２　白金！</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2022/11/soft-skills/" title="《軟實力：軟體開發人員的生存手冊》心得">《軟實力：軟體開發人員的生存手冊》心得</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2022/10/jmeter/" title="使用 JMeter 來對 API 壓力測試吧">使用 JMeter 來對 API 壓力測試吧</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2022/10/sony-wh-1000xm5/" title="Sony WH-1000XM5 使用一週心得">Sony WH-1000XM5 使用一週心得</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/post/2022/09/imtranslator/" title="在 Chrome 使用翻譯套件 ImTranslator 的嵌入式翻譯來逐行中英對照吧">在 Chrome 使用翻譯套件 ImTranslator 的嵌入式翻譯來逐行中英對照吧</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">優文轉貼</h3>
<ul class="widget-list">    
    
    <li>
        <a href="https://igouist.github.io/repost/">推薦文章轉貼區 (86)</a>
    </li>
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">分類</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://igouist.github.io/categories/android/">android (1)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/automation/">automation (3)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/azure/">azure (3)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/bug/">bug (4)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/csharp-and-dotnet/">csharp-and-dotnet (28)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/css/">css (1)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/ide/">ide (3)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/life/">life (7)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/object-oriented/">object-oriented (17)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/powershell/">powershell (1)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/python/">python (7)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/reading/">reading (4)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/tools/">tools (22)</a>
    </li>
    
    <li>
        <a href="https://igouist.github.io/categories/w3hexschool/">w3hexschool (47)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">標籤</h3>
<div class="tagcloud">
    
    <a href="https://igouist.github.io/tags/ai-tools/">ai-tools</a>
    
    <a href="https://igouist.github.io/tags/android/">android</a>
    
    <a href="https://igouist.github.io/tags/anglesharp/">anglesharp</a>
    
    <a href="https://igouist.github.io/tags/api/">api</a>
    
    <a href="https://igouist.github.io/tags/automapper/">automapper</a>
    
    <a href="https://igouist.github.io/tags/automation/">automation</a>
    
    <a href="https://igouist.github.io/tags/azure/">azure</a>
    
    <a href="https://igouist.github.io/tags/azure-functions/">azure-functions</a>
    
    <a href="https://igouist.github.io/tags/bandon/">bandon</a>
    
    <a href="https://igouist.github.io/tags/benchmarkdotnet/">benchmarkdotnet</a>
    
    <a href="https://igouist.github.io/tags/bug/">bug</a>
    
    <a href="https://igouist.github.io/tags/chrome/">chrome</a>
    
    <a href="https://igouist.github.io/tags/crawler/">crawler</a>
    
    <a href="https://igouist.github.io/tags/csharp/">csharp</a>
    
    <a href="https://igouist.github.io/tags/css/">css</a>
    
    <a href="https://igouist.github.io/tags/dapper/">dapper</a>
    
    <a href="https://igouist.github.io/tags/database/">database</a>
    
    <a href="https://igouist.github.io/tags/dotnet/">dotnet</a>
    
    <a href="https://igouist.github.io/tags/electron/">electron</a>
    
    <a href="https://igouist.github.io/tags/entity-framework/">entity-framework</a>
    
    <a href="https://igouist.github.io/tags/enum/">enum</a>
    
    <a href="https://igouist.github.io/tags/excel/">excel</a>
    
    <a href="https://igouist.github.io/tags/game/">game</a>
    
    <a href="https://igouist.github.io/tags/git/">git</a>
    
    <a href="https://igouist.github.io/tags/headphone/">headphone</a>
    
    <a href="https://igouist.github.io/tags/heroku/">heroku</a>
    
    <a href="https://igouist.github.io/tags/ide/">ide</a>
    
    <a href="https://igouist.github.io/tags/life/">life</a>
    
    <a href="https://igouist.github.io/tags/line-notify/">line-notify</a>
    
    <a href="https://igouist.github.io/tags/linux/">linux</a>
    
    <a href="https://igouist.github.io/tags/midjourney/">midjourney</a>
    
    <a href="https://igouist.github.io/tags/mysql/">mysql</a>
    
    <a href="https://igouist.github.io/tags/newbieguide/">newbieguide</a>
    
    <a href="https://igouist.github.io/tags/object-oriented/">object-oriented</a>
    
    <a href="https://igouist.github.io/tags/php/">php</a>
    
    <a href="https://igouist.github.io/tags/powershell/">powershell</a>
    
    <a href="https://igouist.github.io/tags/ptt/">ptt</a>
    
    <a href="https://igouist.github.io/tags/python/">python</a>
    
    <a href="https://igouist.github.io/tags/queue/">queue</a>
    
    <a href="https://igouist.github.io/tags/reading/">reading</a>
    
    <a href="https://igouist.github.io/tags/selenium/">selenium</a>
    
    <a href="https://igouist.github.io/tags/service-bus/">service-bus</a>
    
    <a href="https://igouist.github.io/tags/soft-skills/">soft-skills</a>
    
    <a href="https://igouist.github.io/tags/sqlite/">sqlite</a>
    
    <a href="https://igouist.github.io/tags/swagger/">swagger</a>
    
    <a href="https://igouist.github.io/tags/tools/">tools</a>
    
    <a href="https://igouist.github.io/tags/visualstudio/">visualstudio</a>
    
    <a href="https://igouist.github.io/tags/w3hexschool/">w3hexschool</a>
    
    <a href="https://igouist.github.io/tags/windows/">windows</a>
    
    <a href="https://igouist.github.io/tags/xampp/">xampp</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">蹭一下</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://sunnyday0932.github.io/" title="Sian">🌙 Sian</a>
        </li>
        
        <li>
            <a target="_blank" href="https://wellss12.github.io/" title="Wells">Wells</a>
        </li>
        
        <li>
            <a target="_blank" href="https://kevintsengtw.blogspot.com/" title="mrkt">mrkt 的程式學習筆記</a>
        </li>
        
        <li>
            <a target="_blank" href="https://raychiutw.github.io/" title="ray">Ray&#39;s Notes</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">小東西</h3>
        <ul class="widget-list">
            <li><a href="https://igouist.github.io/index.xml">RSS</a></li>
        </ul>
    </section>

    <section class="widget">
    <h3 class="widget-title">放個廣告加減賺</h3>
    <ul class="widget-list">
        <script src="https://skilltree.my/Promotion/d3f87796-6f35-491a-9fec-700c86b3097b?w=245"></script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-2119949858103459"
            data-ad-slot="9031038367"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </ul>
</section>

</div>
        </div>
    </div>
</div>
<footer id="footer">
    <div class="container">
        &copy; 2019-2023 <a href="https://igouist.github.io/">伊果的沒人看筆記本 By Igouist</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/rujews/maupassant-hugo" target="_blank">maupassant</a>.
        
        
        <br/>
        <span>
          &nbsp;&nbsp;Post Count： 90
        </span>
        
          <span id="busuanzi_container_site_pv">, PV： <span id="busuanzi_value_site_pv"></span></span>
          <div>
        </div>
        
    </div>
</footer>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src="/js/totop.js?v=0.0.0" async=""></script>



<script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>





<script type='text/javascript'>
    window.onload = function() {
      var links = document.links;
      for (var i = 0, linksLength = links.length; i < linksLength; i++) {
        if (links[i].hostname != window.location.hostname) {
          links[i].target = '_blank';
        }
      }
    }
  </script>

</body>
</html>
